<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Flashcards">
    <meta name="theme-color" content="#000000">
    <title>Flashcards</title>
    <link rel="manifest" href="manifest.json">
    <!-- Fallback if manifest fails -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <div class="question-set-section">
            <select class="question-set-select" id="question-set-select" aria-label="Select question set">
                <option value="questions-answers-128.json">128 questions (filing after 10/20/2025)</option>
                <option value="questions-answers-100.json">100 questions (filing before 10/20/2025)</option>
            </select>
        </div>
        
        <div class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div class="card-content">
                            <p class="card-label">Question</p>
                            <p class="card-text" id="question-text">Loading...</p>
                            <p class="note-indicator" id="note-indicator" style="display: none;">note available</p>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div class="card-content">
                            <p class="card-label">Answer</p>
                            <p class="card-text" id="answer-text">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="flashcard-buttons">
            <button type="button" class="critical-button" id="critical-button" aria-label="Mark as critical">
            </button>
          
            <button class="notes-toggle-button" id="notes-toggle-button" aria-label="Toggle notes">
                <span class="notes-icon">✏️</span>
            </button>
        </div>
        
        <div class="notes-section">
            <div class="notes-content" id="notes-content" style="display: none;">
                <textarea 
                    class="notes-textarea" 
                    id="notes-textarea" 
                    placeholder="Add your notes or annotations here..."
                    rows="4"></textarea>
                <div class="notes-actions">
                    <button class="notes-save-button" id="notes-save-button">Save</button>
                    <button class="notes-clear-button" id="notes-clear-button">Clear</button>
                </div>
                <div class="notes-display" id="notes-display" style="display: none;">
                    <p class="notes-label">Your Notes:</p>
                    <p class="notes-text" id="notes-text"></p>
                </div>
            </div>
        </div>
        
        <div class="answer-navigation-wrapper">
            <button class="nav-button" id="prev-button" aria-label="Previous card">&lt;</button>
            <button class="answer-button" id="answer-button" aria-label="Show answer">Show Answer</button>
            <button class="nav-button" id="next-button" aria-label="Next card">&gt;</button>
        </div>
        
        <div class="filter-section">
            <select class="filter-select" id="filter-select" aria-label="Filter flashcards">
                <option value="all" id="filter-all">All Questions </option>
                <option value="critical" id="filter-critical">Red Labeled Questions </option>
                <option value="non-critical" id="filter-non-critical">Green Labeled Questions </option>
            </select>
            <button class="shuffle-button" id="shuffle-button" aria-label="Shuffle cards">Shuffle</button>
        </div>
        
        <div class="card-counter">
            <span id="card-counter">1/1</span>
        </div>
    </div>
    
    <script>
        // Set a flag to indicate script is loading
        window.appScriptLoading = true;
        
        // Fallback: Check if script loaded after 4 seconds
        setTimeout(function() {
            const questionEl = document.getElementById('question-text');
            // Only show error if text is still "Loading..." (script didn't update it)
            // and script didn't load or initialize
            if (questionEl && 
                questionEl.innerHTML === 'Loading...' && 
                (!window.appScriptLoaded || window.appScriptError || !window.appInitializing)) {
                questionEl.innerHTML = 'Script may not have loaded. Check console and network.';
                questionEl.style.color = 'red';
                console.error('App script may not have loaded. Check network tab for app.js');
                console.error('appScriptLoaded:', window.appScriptLoaded);
                console.error('appScriptError:', window.appScriptError);
                console.error('appInitializing:', window.appInitializing);
            }
        }, 4000);
    </script>
    <script src="app.js" onerror="window.appScriptError = true; console.error('Failed to load app.js');"></script>
    <script>
        // Mark script as loaded (this runs after app.js executes)
        window.appScriptLoading = false;
        window.appScriptLoaded = true;
    </script>
</body>
</html>

